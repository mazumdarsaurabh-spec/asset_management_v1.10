<table class="table table-bordered">
    <thead class="thead-dark">
        <tr>
            <th>Item Name</th>
            <th>Description</th>
            <th>Quantity</th>
            <th>Unit Price</th>
            <th>Total Price</th>
            <th>Serial Number</th>
            <th>Category</th>
            <th>Status</th>
            <th>Location</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        {% for item in scanned_items %}
        <tr>
            <td><input type="text" name="item_name" value="{{ item.item_name }}" class="form-control"></td>
            <td><input type="text" name="description" value="{{ item.description }}" class="form-control"></td>
            <td><input type="number" name="quantity" value="{{ item.quantity }}" class="form-control"></td>
            <td><input type="number" step="0.01" name="unit_price" value="{{ item.unit_price }}" class="form-control"></td>
            <td><input type="number" step="0.01" name="total_price" value="{{ item.total_price }}" class="form-control"></td>
            <td><input type="text" name="serial_number" value="{{ item.serial_number }}" class="form-control"></td>

            <!-- Category dropdown -->
            <td>
                <select name="category" class="form-control">
                    {% for cat in categories %}
                        <option value="{{ cat.id }}" 
                            {% if item.category == cat.name %}selected{% endif %}>
                            {{ cat.name }}
                        </option>
                    {% endfor %}
                    <option value="other" {% if item.category == 'Other' %}selected{% endif %}>Other</option>
                </select>
            </td>

            <!-- Status dropdown -->
            <td>
                <select name="status" class="form-control">
                    {% for stat in statuses %}
                        <option value="{{ stat.id }}"
                            {% if item.status == stat.name %}selected{% endif %}>
                            {{ stat.name }}
                        </option>
                    {% endfor %}
                </select>
            </td>

            <td><input type="text" name="location" value="{{ item.location }}" class="form-control"></td>

            <!-- Row Action Button -->
            <td>
                <button type="button" class="btn btn-sm btn-primary">Save</button>
            </td>
        </tr>
        {% endfor %}
    </tbody>

    <!-- Total Value Row -->
    <tfoot>
        <tr>
            <td colspan="4" class="text-right"><strong>Total Estimated Value:</strong></td>
            <td colspan="6">
                <input type="text" readonly class="form-control" 
                       value="{{ scanned_items|sum:'total_price' }}">
            </td>
        </tr>
    </tfoot>
</table>

<!-- Save All Button -->
<div class="mt-3 text-right">
    <button type="submit" class="btn btn-success">Save Scanned Items</button>
</div>
